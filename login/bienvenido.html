<?php
session_start();

// Verifica si el usuario ha iniciado sesión y el token existe
if (!isset($_SESSION['usuario_id']) || !isset($_SESSION['token'])) {
    header("Location: index.html"); // Redirige al inicio de sesión si no hay sesión
    exit();
}

// Verifica la inactividad
$tiempo_inactividad_maximo = 600; // 10 minutos en segundos (10 * 60)
if (time() - $_SESSION['ultimo_acceso'] > $tiempo_inactividad_maximo) {
    session_destroy();
    header("Location: index.html");
    exit();
}

// Actualiza el tiempo del último acceso
$_SESSION['ultimo_acceso'] = time();
?>
<!DOCTYPE html>
<html>
<head>
    <title>Bienvenido</title>
</head>
<body>
    <h1>Bienvenido, <?php echo $_SESSION['usuario_id']; ?>!</h1> <p>Has iniciado sesión correctamente.</p>
    <a href="logout.php">Cerrar sesión</a> </body>
</html>